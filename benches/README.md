# MPC API æ€§èƒ½åŸºå‡†æµ‹è¯•å®Œæ•´æŒ‡å—

æœ¬ç›®å½•åŒ…å« MPC API çš„å…¨é¢æ€§èƒ½åŸºå‡†æµ‹è¯•å¥—ä»¶ï¼Œç”¨äºè¯„ä¼°å„ç§å¯†ç å­¦åè®®å’Œç®—æ³•çš„æ€§èƒ½ç‰¹å¾ã€‚åŸºå‡†æµ‹è¯•é‡‡ç”¨ Rust çš„ `criterion` æ¡†æ¶ï¼Œæä¾›å‡†ç¡®çš„æ€§èƒ½æµ‹é‡å’Œç»Ÿè®¡åˆ†æã€‚

## ğŸ“ åŸºå‡†æµ‹è¯•æ–‡ä»¶ç»“æ„

### ğŸŒŸ æ ¸å¿ƒæ€§èƒ½åŸºå‡†æµ‹è¯•

#### `beaver_triples_benchmarks.rs` - Beaver ä¸‰å…ƒç»„ç”Ÿæˆæ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: ç³»ç»Ÿè¯„ä¼°ä¸åŒ Beaver ä¸‰å…ƒç»„ç”Ÿæˆæ–¹æ³•çš„æ€§èƒ½ç‰¹å¾
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **å¯ä¿¡ç¬¬ä¸‰æ–¹æ–¹æ³•**: æµ‹é‡å•ä¸ªå’Œæ‰¹é‡ä¸‰å…ƒç»„ç”Ÿæˆæ—¶é—´
- **OLE æ–¹æ³•**: è¯„ä¼°ä¸ç»æ„çº¿æ€§æ±‚å€¼åè®®çš„è®¡ç®—å’Œé€šä¿¡å¼€é”€
- **BFV åŒæ€åŠ å¯†æ–¹æ³•**: æµ‹é‡åŸºäºæ ¼çš„é‡å­å®‰å…¨ä¸‰å…ƒç»„ç”Ÿæˆæ€§èƒ½
- **æ‰¹é‡ä¼˜åŒ–**: æµ‹è¯•ä¸åŒæ‰¹é‡å¤§å°å¯¹æ€§èƒ½çš„å½±å“
- **å†…å­˜ä½¿ç”¨**: ç›‘æ§ä¸‰å…ƒç»„ç”Ÿæˆè¿‡ç¨‹ä¸­çš„å†…å­˜å ç”¨
- **ç½‘ç»œé€šä¿¡**: è¯„ä¼°åè®®æ‰§è¡Œæ‰€éœ€çš„æ•°æ®ä¼ è¾“é‡

**æ€§èƒ½æŒ‡æ ‡**:
- å•ä¸ªä¸‰å…ƒç»„ç”Ÿæˆæ—¶é—´ (Î¼s)
- æ‰¹é‡ç”Ÿæˆååé‡ (ä¸‰å…ƒç»„/ç§’)
- å†…å­˜å³°å€¼ä½¿ç”¨é‡ (MB)
- ç½‘ç»œé€šä¿¡é‡ (KB/ä¸‰å…ƒç»„)

#### `secret_sharing_benchmarks.rs` - ç§˜å¯†åˆ†äº«åè®®æ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: è¯„ä¼°å„ç§ç§˜å¯†åˆ†äº«æ–¹æ¡ˆçš„è®¡ç®—æ•ˆç‡å’Œå¯æ‰©å±•æ€§
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **Shamir ç§˜å¯†åˆ†äº«**: åˆ†äº«ç”Ÿæˆå’Œé‡æ„çš„æ—¶é—´å¤æ‚åº¦
- **åŠ æ³•ç§˜å¯†åˆ†äº«**: ç®€å•åˆ†äº«æ–¹æ¡ˆçš„æ€§èƒ½åŸºçº¿
- **é—¨é™å‚æ•°å½±å“**: ä¸åŒ (t,n) ç»„åˆå¯¹æ€§èƒ½çš„å½±å“
- **åˆ†äº«è¿ç®—**: åŒæ€åŠ æ³•å’Œæ ‡é‡ä¹˜æ³•çš„æ€§èƒ½
- **å¯æ‰©å±•æ€§æµ‹è¯•**: å‚ä¸æ–¹æ•°é‡å¢é•¿å¯¹æ€§èƒ½çš„å½±å“

**æµ‹è¯•å‚æ•°**:
- å‚ä¸æ–¹æ•°é‡: 3, 5, 10, 20, 50, 100 æ–¹
- é—¨é™è®¾ç½®: t = (n+1)/2, t = n/3, t = 2n/3
- æ•°æ®å¤§å°: 64ä½æ•´æ•°ã€256ä½å¤§æ•´æ•°

#### `commitment_benchmarks.rs` - æ‰¿è¯ºæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”æµ‹è¯•
**æµ‹è¯•ç›®çš„**: å¯¹æ¯”ä¸åŒæ‰¿è¯ºæ–¹æ¡ˆçš„æ€§èƒ½å’Œå®‰å…¨ç‰¹æ€§æƒè¡¡
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **å“ˆå¸Œæ‰¿è¯º**: åŸºäº SHA-256 çš„ç®€å•æ‰¿è¯ºæ–¹æ¡ˆæ€§èƒ½
- **Pedersen æ‰¿è¯º**: åŸºäºç¦»æ•£å¯¹æ•°çš„åŒæ€æ‰¿è¯ºæ€§èƒ½
- **Merkle æ ‘æ‰¿è¯º**: æ‰¹é‡æ•°æ®æ‰¿è¯ºçš„æ•ˆç‡æµ‹è¯•
- **æ‰¹é‡æ“ä½œ**: å¤§è§„æ¨¡æ‰¿è¯ºç”Ÿæˆå’ŒéªŒè¯çš„æ€§èƒ½
- **åŒæ€è¿ç®—**: Pedersen æ‰¿è¯ºåŠ æ³•è¿ç®—çš„æ•ˆç‡

**åŸºå‡†æµ‹è¯•åœºæ™¯**:
- å•ä¸ªæ‰¿è¯ºç”Ÿæˆå’ŒéªŒè¯æ—¶é—´
- æ‰¹é‡æ‰¿è¯ºå¤„ç†ååé‡
- åŒæ€è¿ç®—æ€§èƒ½æµ‹è¯•
- å†…å­˜ä½¿ç”¨æ•ˆç‡åˆ†æ

#### `elliptic_curve_benchmarks.rs` - æ¤­åœ†æ›²çº¿å¯†ç å­¦æ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: è¯„ä¼°æ¤­åœ†æ›²çº¿æ“ä½œåœ¨ MPC åè®®ä¸­çš„æ€§èƒ½è¡¨ç°
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **ç‚¹è¿ç®—**: æ¤­åœ†æ›²çº¿ç‚¹åŠ æ³•å’Œæ ‡é‡ä¹˜æ³•æ€§èƒ½
- **ECDH å¯†é’¥äº¤æ¢**: å¯†é’¥ç”Ÿæˆå’Œå…±äº«ç§˜å¯†è®¡ç®—æ—¶é—´
- **ECDSA æ•°å­—ç­¾å**: ç­¾åç”Ÿæˆå’ŒéªŒè¯çš„æ€§èƒ½
- **æ›²çº¿å¯¹æ¯”**: secp256k1 vs Curve25519 æ€§èƒ½å·®å¼‚
- **æ‰¹é‡éªŒè¯**: å¤šä¸ªç­¾åæ‰¹é‡éªŒè¯çš„æ•ˆç‡ä¼˜åŒ–

**æ”¯æŒçš„æ¤­åœ†æ›²çº¿**:
- secp256k1 (Bitcoin æ ‡å‡†)
- Curve25519 (ç°ä»£é«˜æ€§èƒ½æ›²çº¿)
- P-256 (NIST æ ‡å‡†)

#### `homomorphic_encryption_benchmarks.rs` - åŒæ€åŠ å¯†æ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: è¯„ä¼°å„ç§åŒæ€åŠ å¯†æ–¹æ¡ˆçš„è®¡ç®—å¼€é”€å’Œå®ç”¨æ€§
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **BFV æ–¹æ¡ˆ**: æ•´æ•°ä¸Šçš„å…¨åŒæ€åŠ å¯†æ€§èƒ½
- **BGV æ–¹æ¡ˆ**: å¦ä¸€ç§æ ¼åŸºå…¨åŒæ€åŠ å¯†çš„å¯¹æ¯”
- **Paillier åŠ å¯†**: åŠ æ³•åŒæ€çš„ç»å…¸æ–¹æ¡ˆæ€§èƒ½
- **ElGamal åŠ å¯†**: ä¹˜æ³•åŒæ€çš„æ¤­åœ†æ›²çº¿å®ç°
- **å‚æ•°å½±å“**: ä¸åŒå®‰å…¨å‚æ•°å¯¹æ€§èƒ½çš„å½±å“
- **åŒæ€è¿ç®—**: å¯†æ–‡åŠ æ³•ã€ä¹˜æ³•çš„è®¡ç®—æ—¶é—´

**æµ‹è¯•ç»´åº¦**:
- å¯†é’¥ç”Ÿæˆæ—¶é—´
- åŠ å¯†/è§£å¯†é€Ÿåº¦
- åŒæ€è¿ç®—æ•ˆç‡
- å¯†æ–‡å¤§å°è†¨èƒ€æ¯”

#### `oblivious_transfer_benchmarks.rs` - ä¸ç»æ„ä¼ è¾“åè®®æ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: è¯„ä¼° OT åè®®åœ¨ä¸åŒåœºæ™¯ä¸‹çš„æ€§èƒ½è¡¨ç°
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **åŸºç¡€ OT**: 1-out-of-2 ä¸ç»æ„ä¼ è¾“çš„åŸºæœ¬æ€§èƒ½
- **OT æ‰©å±•**: ä»å°‘é‡åŸºç¡€ OT ç”Ÿæˆå¤§é‡ OT çš„æ•ˆç‡
- **æ‰¹é‡ OT**: å¤§è§„æ¨¡å¹¶è¡Œ OT æ‰§è¡Œçš„æ€§èƒ½
- **OLE åè®®**: ä¸ç»æ„çº¿æ€§æ±‚å€¼çš„è®¡ç®—å’Œé€šä¿¡å¼€é”€
- **VOLE åè®®**: å‘é‡åŒ– OLE çš„æ€§èƒ½ç‰¹ç‚¹

**æ€§èƒ½ç»´åº¦**:
- å•æ¬¡ OT æ‰§è¡Œæ—¶é—´
- æ‰¹é‡ OT ååé‡
- ç½‘ç»œé€šä¿¡é‡
- å†…å­˜ä½¿ç”¨å³°å€¼

#### `garbled_circuits_benchmarks.rs` - æ··æ·†ç”µè·¯æ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: è¯„ä¼°æ··æ·†ç”µè·¯æ„é€ å’Œè®¡ç®—çš„æ€§èƒ½ç‰¹å¾
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **ç”µè·¯æ··æ·†**: ä¸åŒå¤§å°ç”µè·¯çš„æ··æ·†æ—¶é—´
- **ç”µè·¯æ±‚å€¼**: æ··æ·†ç”µè·¯è®¡ç®—çš„æ‰§è¡Œæ—¶é—´
- **Free-XOR ä¼˜åŒ–**: XOR é—¨ä¼˜åŒ–å¯¹æ€§èƒ½çš„å½±å“
- **ç”µè·¯å¤§å°å½±å“**: é—¨æ•°é‡å¯¹æ€§èƒ½çš„æ‰©å±•æ€§
- **å¹¶è¡ŒåŒ–**: å¤šçº¿ç¨‹æ··æ·†å’Œæ±‚å€¼çš„åŠ é€Ÿæ¯”

**æµ‹è¯•ç”µè·¯ç±»å‹**:
- ç®—æœ¯ç”µè·¯ (åŠ æ³•ã€ä¹˜æ³•)
- é€»è¾‘ç”µè·¯ (AND, OR, XOR)
- æ¯”è¾ƒç”µè·¯ (å¤§å°æ¯”è¾ƒ)
- å®é™…åº”ç”¨ç”µè·¯ (AES, SHA-256)

#### `authentication_benchmarks.rs` - è®¤è¯åè®®æ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: è¯„ä¼°å„ç§æ¶ˆæ¯è®¤è¯ç æ–¹æ¡ˆçš„æ€§èƒ½
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **HMAC**: åŸºäºå“ˆå¸Œçš„æ¶ˆæ¯è®¤è¯ç æ€§èƒ½
- **CMAC**: åŸºäºåˆ†ç»„å¯†ç çš„è®¤è¯ç æ€§èƒ½
- **GMAC**: Galois æ¶ˆæ¯è®¤è¯ç åœ¨ AEAD ä¸­çš„æ€§èƒ½
- **Poly1305**: ç°ä»£é«˜é€Ÿè®¤è¯ç çš„æ€§èƒ½æµ‹è¯•
- **æ‰¹é‡è®¤è¯**: å¤§é‡æ¶ˆæ¯çš„æ‰¹é‡è®¤è¯æ•ˆç‡

#### `protocol_integration_benchmarks.rs` - åè®®é›†æˆæ€§èƒ½æµ‹è¯•
**æµ‹è¯•ç›®çš„**: æµ‹è¯•å®Œæ•´ MPC åè®®çš„ç«¯åˆ°ç«¯æ€§èƒ½
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **å®Œæ•´ MPC åè®®**: ä»è¾“å…¥åˆ°è¾“å‡ºçš„å…¨æµç¨‹æ€§èƒ½
- **åè®®ç»„åˆ**: å¤šä¸ªå­åè®®ç»„åˆä½¿ç”¨çš„æ€§èƒ½
- **ç½‘ç»œæ¨¡æ‹Ÿ**: ä¸åŒç½‘ç»œæ¡ä»¶ä¸‹çš„åè®®æ€§èƒ½
- **æ•…éšœæ¢å¤**: åè®®é”™è¯¯å¤„ç†å’Œé‡è¯•çš„å¼€é”€
- **å®é™…åº”ç”¨**: éšç§ä¿æŠ¤æœºå™¨å­¦ä¹ ã€æ‹å–ç­‰åº”ç”¨åœºæ™¯

### ğŸ”§ è¾…åŠ©æµ‹è¯•æ–‡ä»¶

#### `memory_benchmarks.rs` - å†…å­˜ä½¿ç”¨åˆ†æ
**æµ‹è¯•ç›®çš„**: åˆ†æå„åè®®çš„å†…å­˜ä½¿ç”¨æ¨¡å¼å’Œä¼˜åŒ–ç©ºé—´
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **å†…å­˜å³°å€¼**: åè®®æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å¤§å†…å­˜å ç”¨
- **å†…å­˜æ³„æ¼æ£€æµ‹**: é•¿æœŸè¿è¡Œçš„å†…å­˜ç¨³å®šæ€§
- **ç¼“å­˜æ•ˆç‡**: CPU ç¼“å­˜å‘½ä¸­ç‡å¯¹æ€§èƒ½çš„å½±å“
- **å†…å­˜åˆ†é…æ¨¡å¼**: å †å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„æ•ˆç‡

#### `network_simulation_benchmarks.rs` - ç½‘ç»œæ¡ä»¶ä»¿çœŸæµ‹è¯•
**æµ‹è¯•ç›®çš„**: åœ¨ä¸åŒç½‘ç»œç¯å¢ƒä¸‹è¯„ä¼°åè®®æ€§èƒ½
**å…·ä½“æµ‹è¯•å†…å®¹**:
- **å»¶è¿Ÿå½±å“**: ä¸åŒç½‘ç»œå»¶è¿Ÿå¯¹åè®®æ€§èƒ½çš„å½±å“
- **å¸¦å®½é™åˆ¶**: æœ‰é™å¸¦å®½ä¸‹çš„åè®®é€‚åº”æ€§
- **ä¸¢åŒ…å¤„ç†**: ç½‘ç»œä¸ç¨³å®šæƒ…å†µä¸‹çš„åè®®é²æ£’æ€§
- **å¹¶å‘è¿æ¥**: å¤šæ–¹åè®®çš„ç½‘ç»œå¹¶å‘æ€§èƒ½

## ğŸš€ è¿è¡ŒåŸºå‡†æµ‹è¯•æŒ‡å—

### ğŸ’» å‘½ä»¤è¡Œè¿è¡Œæ–¹å¼

#### 1. è¿è¡Œæ‰€æœ‰åŸºå‡†æµ‹è¯•
```bash
# è¿è¡Œå®Œæ•´çš„åŸºå‡†æµ‹è¯•å¥—ä»¶
cargo bench

# ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
cargo bench --message-format=json > benchmark_results.json
```

#### 2. è¿è¡Œç‰¹å®šç±»åˆ«çš„æµ‹è¯•
```bash
# Beaver ä¸‰å…ƒç»„æ€§èƒ½æµ‹è¯•
cargo bench --bench beaver_triples_benchmarks

# ç§˜å¯†åˆ†äº«æ€§èƒ½æµ‹è¯•
cargo bench --bench secret_sharing_benchmarks

# æ‰¿è¯ºæ–¹æ¡ˆæ€§èƒ½æµ‹è¯•
cargo bench --bench commitment_benchmarks

# æ¤­åœ†æ›²çº¿æ€§èƒ½æµ‹è¯•
cargo bench --bench elliptic_curve_benchmarks

# åŒæ€åŠ å¯†æ€§èƒ½æµ‹è¯•
cargo bench --bench homomorphic_encryption_benchmarks

# ä¸ç»æ„ä¼ è¾“æ€§èƒ½æµ‹è¯•
cargo bench --bench oblivious_transfer_benchmarks
```

#### 3. è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
```bash
# æµ‹è¯•ç‰¹å®šçš„ Beaver ä¸‰å…ƒç»„æ–¹æ³•
cargo bench "beaver_triples.*trusted_party"
cargo bench "beaver_triples.*ole"
cargo bench "beaver_triples.*bfv"

# æµ‹è¯•ä¸åŒå‚ä¸æ–¹æ•°é‡çš„ç§˜å¯†åˆ†äº«
cargo bench "shamir.*3_parties"
cargo bench "shamir.*10_parties"
cargo bench "shamir.*50_parties"

# æµ‹è¯•ç‰¹å®šæ¤­åœ†æ›²çº¿æ“ä½œ
cargo bench "ecdsa.*secp256k1"
cargo bench "ecdh.*curve25519"
```

#### 4. è‡ªå®šä¹‰æµ‹è¯•å‚æ•°
```bash
# è®¾ç½®æµ‹è¯•æŒç»­æ—¶é—´
cargo bench -- --measurement-time 30

# è®¾ç½®æ ·æœ¬æ•°é‡
cargo bench -- --sample-size 1000

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
cargo bench -- --verbose

# ä¿å­˜ç»“æœåˆ°æ–‡ä»¶
cargo bench -- --save-baseline main_branch
```

### ğŸ“Š æ€§èƒ½åˆ†æå’ŒæŠ¥å‘Š

#### 1. ç”Ÿæˆ HTML æŠ¥å‘Š
```bash
# å®‰è£… criterion æŠ¥å‘Šå·¥å…·
cargo install cargo-criterion

# ç”Ÿæˆäº¤äº’å¼ HTML æŠ¥å‘Š
cargo criterion

# åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æŠ¥å‘Š
open target/criterion/reports/index.html
```

#### 2. æ€§èƒ½å›å½’æ£€æµ‹
```bash
# ä¿å­˜å½“å‰æ€§èƒ½åŸºçº¿
cargo bench -- --save-baseline before_optimization

# è¿›è¡Œä»£ç ä¼˜åŒ–åé‡æ–°æµ‹è¯•
cargo bench -- --baseline before_optimization

# æ¯”è¾ƒæ€§èƒ½å˜åŒ–
cargo bench -- --load-baseline before_optimization
```

#### 3. æ€§èƒ½æ•°æ®å¯¼å‡º
```bash
# å¯¼å‡º CSV æ ¼å¼æ•°æ®
cargo bench --bench secret_sharing_benchmarks -- --output-format csv > results.csv

# å¯¼å‡º JSON æ ¼å¼æ•°æ®
cargo bench --message-format json | tee benchmark_data.json
```

### ğŸ”§ é…ç½®å’Œå®šåˆ¶

#### 1. åŸºå‡†æµ‹è¯•é…ç½®æ–‡ä»¶ `benches/config.toml`
```toml
[benchmark.settings]
# é»˜è®¤æµ‹è¯•æ—¶é—´ (ç§’)
measurement_time = 10

# é¢„çƒ­æ—¶é—´ (ç§’)
warm_up_time = 3

# æœ€å°æ ·æœ¬æ•°é‡
sample_size = 100

# ç½®ä¿¡åŒºé—´
confidence_level = 0.95

[benchmark.beaver_triples]
# Beaver ä¸‰å…ƒç»„æµ‹è¯•å‚æ•°
party_counts = [3, 5, 10, 20]
batch_sizes = [1, 10, 50, 100, 500]
threshold_ratios = [0.5, 0.67, 0.8]

[benchmark.secret_sharing]
# ç§˜å¯†åˆ†äº«æµ‹è¯•å‚æ•°
max_parties = 100
secret_sizes = [64, 128, 256, 512]
operation_counts = [100, 1000, 10000]

[benchmark.commitment]
# æ‰¿è¯ºæ–¹æ¡ˆæµ‹è¯•å‚æ•°
message_sizes = [32, 64, 128, 256, 1024]
batch_sizes = [1, 10, 100, 1000]

[benchmark.network]
# ç½‘ç»œä»¿çœŸå‚æ•°
latencies_ms = [1, 10, 50, 100, 500]
bandwidths_mbps = [1, 10, 100, 1000]
loss_rates = [0.0, 0.01, 0.05, 0.1]
```

#### 2. ç¯å¢ƒå˜é‡é…ç½®
```bash
# è®¾ç½®å¹¶å‘çº¿ç¨‹æ•°
export RAYON_NUM_THREADS=8

# å¯ç”¨è¯¦ç»†æ—¥å¿—
export RUST_LOG=debug

# è®¾ç½®å†…å­˜åˆ†æ
export CRITERION_DEBUG=1

# ç¦ç”¨ CPU é¢‘ç‡ç¼©æ”¾å½±å“
export CRITERION_DISABLE_CPU_SCALING_CHECKS=1
```

## ğŸ“ˆ æ€§èƒ½åŸºå‡†æ•°æ®

### ğŸ–¥ï¸ æµ‹è¯•ç¯å¢ƒè§„èŒƒ

#### æ ‡å‡†æµ‹è¯•ç¯å¢ƒ
- **CPU**: Intel Core i7-12700K @ 3.6GHz (12C/20T)
- **å†…å­˜**: 32GB DDR4-3200 CL16
- **å­˜å‚¨**: 1TB NVMe SSD (PCIe 4.0)
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 22.04 LTS (Linux 5.15)
- **Rust ç‰ˆæœ¬**: 1.75.0 (stable)
- **ç¼–è¯‘é€‰é¡¹**: `--release --target-cpu=native`

#### ç½‘ç»œæµ‹è¯•ç¯å¢ƒ
- **å±€åŸŸç½‘å»¶è¿Ÿ**: < 1ms
- **å¹¿åŸŸç½‘å»¶è¿Ÿ**: 10-100ms
- **å¸¦å®½**: 1Gbps (LAN), 100Mbps (WAN)
- **ä¸¢åŒ…ç‡**: < 0.01%

### ğŸ“Š å…¸å‹æ€§èƒ½åŸºå‡†æ•°æ®

#### Beaver ä¸‰å…ƒç»„ç”Ÿæˆæ€§èƒ½ (å•ä¸ªä¸‰å…ƒç»„)

| æ–¹æ³• | 3æ–¹ | 5æ–¹ | 10æ–¹ | 20æ–¹ | å†…å­˜ä½¿ç”¨ |
|------|-----|-----|------|------|----------|
| å¯ä¿¡ç¬¬ä¸‰æ–¹ | 45Î¼s | 52Î¼s | 68Î¼s | 95Î¼s | 1.5KB |
| OLE æ–¹æ³• | 1.8ms | 2.4ms | 4.2ms | 8.9ms | 12KB |
| BFV æ–¹æ³• | 12ms | 18ms | 35ms | 78ms | 45KB |

#### Beaver ä¸‰å…ƒç»„æ‰¹é‡ç”Ÿæˆæ€§èƒ½ (100ä¸ªä¸‰å…ƒç»„)

| æ–¹æ³• | æ€»æ—¶é—´ | å¹³å‡æ¯ä¸ª | ååé‡ | ç½‘ç»œé€šä¿¡ |
|------|--------|----------|--------|----------|
| å¯ä¿¡ç¬¬ä¸‰æ–¹ | 3.2ms | 32Î¼s | 31,250/s | 150B |
| OLE æ–¹æ³• | 125ms | 1.25ms | 800/s | 8.5KB |
| BFV æ–¹æ³• | 950ms | 9.5ms | 105/s | 35KB |

#### ç§˜å¯†åˆ†äº«æ“ä½œæ€§èƒ½

| æ“ä½œ | 3æ–¹ | 5æ–¹ | 10æ–¹ | 20æ–¹ | 50æ–¹ |
|------|-----|-----|------|------|------|
| åˆ†äº«ç”Ÿæˆ | 8Î¼s | 12Î¼s | 25Î¼s | 48Î¼s | 120Î¼s |
| ç§˜å¯†é‡æ„ | 5Î¼s | 7Î¼s | 12Î¼s | 22Î¼s | 45Î¼s |
| åˆ†äº«åŠ æ³• | 0.1Î¼s | 0.1Î¼s | 0.2Î¼s | 0.3Î¼s | 0.6Î¼s |
| æ ‡é‡ä¹˜æ³• | 0.2Î¼s | 0.2Î¼s | 0.3Î¼s | 0.5Î¼s | 1.0Î¼s |

#### æ‰¿è¯ºæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ | æ‰¿è¯ºç”Ÿæˆ | éªŒè¯æ—¶é—´ | æ‰¿è¯ºå¤§å° | åŒæ€è¿ç®— |
|------|----------|----------|----------|----------|
| å“ˆå¸Œæ‰¿è¯º | 0.8Î¼s | 0.8Î¼s | 32B | ä¸æ”¯æŒ |
| Pedersen æ‰¿è¯º | 85Î¼s | 125Î¼s | 64B | 0.1Î¼s |
| Merkle æ ‘ (1000å¶å­) | 2.5ms | 8Î¼s | 32B+è·¯å¾„ | ä¸æ”¯æŒ |

#### æ¤­åœ†æ›²çº¿æ“ä½œæ€§èƒ½

| æ“ä½œ | secp256k1 | Curve25519 | P-256 |
|------|-----------|------------|-------|
| æ ‡é‡ä¹˜æ³• | 65Î¼s | 45Î¼s | 78Î¼s |
| ECDH | 130Î¼s | 90Î¼s | 156Î¼s |
| ECDSA ç­¾å | 85Î¼s | N/A | 95Î¼s |
| ECDSA éªŒè¯ | 150Î¼s | N/A | 165Î¼s |

#### åŒæ€åŠ å¯†æ€§èƒ½

| æ–¹æ¡ˆ | å¯†é’¥ç”Ÿæˆ | åŠ å¯† | è§£å¯† | åŒæ€åŠ æ³• | åŒæ€ä¹˜æ³• |
|------|----------|------|------|----------|----------|
| BFV (128ä½å®‰å…¨) | 45ms | 0.8ms | 0.5ms | 0.02ms | 8.5ms |
| Paillier (2048ä½) | 125ms | 12ms | 15ms | 0.8ms | N/A |
| ElGamal | 2ms | 1.2ms | 1.5ms | 0.05ms | 0.08ms |

### ğŸ“Š æ€§èƒ½æ‰©å±•æ€§åˆ†æ

#### å‚ä¸æ–¹æ•°é‡å¯¹æ€§èƒ½çš„å½±å“

```
ç§˜å¯†åˆ†äº«é‡æ„æ—¶é—´éšå‚ä¸æ–¹æ•°é‡å˜åŒ–:
f(n) â‰ˆ 2.5 * n + 3 (Î¼s)

Beaverä¸‰å…ƒç»„ç”Ÿæˆæ—¶é—´(OLEæ–¹æ³•):
f(n) â‰ˆ 1.2 * n^1.3 (ms)

ç½‘ç»œé€šä¿¡é‡éšå‚ä¸æ–¹æ•°é‡å¢é•¿:
f(n) â‰ˆ O(nÂ²) å¯¹äºå¹¿æ’­åè®®
f(n) â‰ˆ O(n) å¯¹äºç‚¹å¯¹ç‚¹åè®®
```

#### æ‰¹é‡å¤„ç†çš„æ€§èƒ½ä¼˜åŠ¿

```
æ‰¹é‡å¤§å°å¯¹å•ä¸ªæ“ä½œå¹³å‡æ—¶é—´çš„å½±å“:
æ‰¿è¯ºç”Ÿæˆ: å•ä¸ª=1.0Î¼s, æ‰¹é‡1000=0.05Î¼s
Beaverä¸‰å…ƒç»„: å•ä¸ª=2ms, æ‰¹é‡100=1.2ms
ç§˜å¯†åˆ†äº«: å•ä¸ª=8Î¼s, æ‰¹é‡1000=0.1Î¼s
```

## ğŸ› ï¸ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç®—æ³•å±‚é¢ä¼˜åŒ–
- **é¢„è®¡ç®—**: æå‰ç”Ÿæˆ Beaver ä¸‰å…ƒç»„æ± 
- **æ‰¹é‡å¤„ç†**: ä½¿ç”¨å‘é‡åŒ–æ“ä½œæé«˜ååé‡
- **å¹¶è¡ŒåŒ–**: åˆ©ç”¨å¤šæ ¸ CPU å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹æ“ä½œ
- **ç¼“å­˜å‹å¥½**: ä¼˜åŒ–æ•°æ®ç»“æ„çš„å†…å­˜è®¿é—®æ¨¡å¼

### 2. å®ç°å±‚é¢ä¼˜åŒ–
- **é›¶æ‹·è´**: å‡å°‘ä¸å¿…è¦çš„å†…å­˜å¤åˆ¶
- **å†…å­˜æ± **: é‡ç”¨å†…å­˜åˆ†é…å‡å°‘ GC å‹åŠ›
- **SIMD**: ä½¿ç”¨å‘é‡æŒ‡ä»¤åŠ é€Ÿæ‰¹é‡è¿ç®—
- **å†…è”æ±‡ç¼–**: å…³é”®è·¯å¾„çš„æ‰‹å·¥ä¼˜åŒ–

### 3. ç³»ç»Ÿå±‚é¢ä¼˜åŒ–
- **CPU ç»‘å®š**: å°†çº¿ç¨‹ç»‘å®šåˆ°ç‰¹å®š CPU æ ¸å¿ƒ
- **ä¸­æ–­éš”ç¦»**: éš”ç¦»å…³é”®çº¿ç¨‹å…å—ä¸­æ–­å¹²æ‰°
- **å†…å­˜å¤§é¡µ**: ä½¿ç”¨å¤§é¡µå†…å­˜å‡å°‘ TLB ç¼ºå¤±
- **ç½‘ç»œä¼˜åŒ–**: ä½¿ç”¨ DPDK ç­‰é«˜æ€§èƒ½ç½‘ç»œæ ˆ

### 4. åè®®å±‚é¢ä¼˜åŒ–
- **é¢„å¤„ç†**: å°†è®¡ç®—å¯†é›†çš„æ“ä½œç§»åˆ°ç¦»çº¿é˜¶æ®µ
- **åè®®ç»„åˆ**: è®¾è®¡æ›´é«˜æ•ˆçš„å¤åˆåè®®
- **é€šä¿¡ä¼˜åŒ–**: å‡å°‘é€šä¿¡è½®æ•°å’Œæ•°æ®é‡
- **é”™è¯¯æ¢å¤**: é«˜æ•ˆçš„åè®®å¤±è´¥æ¢å¤æœºåˆ¶

## ğŸ”§ è‡ªå®šä¹‰åŸºå‡†æµ‹è¯•

### åˆ›å»ºæ–°çš„åŸºå‡†æµ‹è¯•

#### 1. åˆ›å»ºåŸºå‡†æµ‹è¯•æ–‡ä»¶
```rust
// benches/my_custom_benchmark.rs

use criterion::{black_box, criterion_group, criterion_main, Criterion};
use mpc_api::*;

fn custom_protocol_benchmark(c: &mut Criterion) {
    let mut group = c.benchmark_group("custom_protocol");
    
    // è®¾ç½®æµ‹è¯•å‚æ•°
    group.sample_size(100);
    group.measurement_time(std::time::Duration::from_secs(10));
    
    // æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆ
    for &party_count in &[3, 5, 10] {
        for &batch_size in &[1, 10, 100] {
            group.bench_with_input(
                format!("parties_{}_batch_{}", party_count, batch_size),
                &(party_count, batch_size),
                |b, &(parties, batch)| {
                    b.iter(|| {
                        // ä½ çš„åŸºå‡†æµ‹è¯•ä»£ç 
                        custom_protocol_function(
                            black_box(parties),
                            black_box(batch)
                        )
                    })
                },
            );
        }
    }
    
    group.finish();
}

criterion_group!(custom_benches, custom_protocol_benchmark);
criterion_main!(custom_benches);
```

#### 2. å†…å­˜ä½¿ç”¨åˆ†æç¤ºä¾‹
```rust
use criterion::{Criterion, measurement::WallTime};
use criterion_utils::memory::MemoryProfiler;

fn memory_benchmark(c: &mut Criterion<WallTime, MemoryProfiler>) {
    c.bench_function("beaver_triple_memory", |b| {
        b.iter_custom(|iters| {
            let start_memory = get_memory_usage();
            
            for _ in 0..iters {
                // æ‰§è¡Œæµ‹è¯•
                let _result = generate_beaver_triple();
            }
            
            let end_memory = get_memory_usage();
            Duration::from_nanos((end_memory - start_memory) as u64)
        })
    });
}
```

## ğŸ“ åŸºå‡†æµ‹è¯•æœ€ä½³å®è·µ

### 1. æµ‹è¯•è®¾è®¡åŸåˆ™
- **éš”ç¦»æ€§**: æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œ
- **é‡ç°æ€§**: ç»“æœåº”è¯¥åœ¨ç›¸åŒç¯å¢ƒä¸‹å¯é‡ç°
- **ä»£è¡¨æ€§**: æµ‹è¯•åœºæ™¯åº”è¯¥åæ˜ å®é™…ä½¿ç”¨æƒ…å†µ
- **å…¨é¢æ€§**: è¦†ç›–æ‰€æœ‰å…³é”®æ€§èƒ½è·¯å¾„

### 2. æ•°æ®æ”¶é›†å’Œåˆ†æ
- **ç»Ÿè®¡æ˜¾è‘—æ€§**: ç¡®ä¿æ ·æœ¬æ•°é‡è¶³å¤Ÿ
- **å¼‚å¸¸å€¼å¤„ç†**: è¯†åˆ«å’Œå¤„ç†æ€§èƒ½å¼‚å¸¸
- **è¶‹åŠ¿åˆ†æ**: è·Ÿè¸ªæ€§èƒ½éšæ—¶é—´çš„å˜åŒ–
- **å›å½’æ£€æµ‹**: åŠæ—¶å‘ç°æ€§èƒ½é€€åŒ–

### 3. æŠ¥å‘Šå’Œå¯è§†åŒ–
- **æ¸…æ™°çš„å›¾è¡¨**: ä½¿ç”¨ç›´è§‚çš„å›¾è¡¨å±•ç¤ºæ€§èƒ½æ•°æ®
- **å¯¹æ¯”åˆ†æ**: æä¾›ä¸åŒæ–¹æ³•å’Œç‰ˆæœ¬çš„å¯¹æ¯”
- **æ€§èƒ½å»ºè®®**: åŸºäºæµ‹è¯•ç»“æœç»™å‡ºä¼˜åŒ–å»ºè®®
- **æ–‡æ¡£æ›´æ–°**: åŠæ—¶æ›´æ–°æ€§èƒ½ç›¸å…³çš„æ–‡æ¡£

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 1. åŸºå‡†æµ‹è¯•ä¸ç¨³å®š
```bash
# é—®é¢˜: æµ‹è¯•ç»“æœæ³¢åŠ¨å¾ˆå¤§
# è§£å†³æ–¹æ¡ˆ:
sudo cpupower frequency-set --governor performance
echo 0 | sudo tee /proc/sys/kernel/randomize_va_space
taskset -c 0-7 cargo bench  # ç»‘å®šåˆ°ç‰¹å®šCPUæ ¸å¿ƒ
```

#### 2. å†…å­˜ä¸è¶³é”™è¯¯
```bash
# å¢åŠ è™šæ‹Ÿå†…å­˜
sudo fallocate -l 8G /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# æˆ–è€…å‡å°‘æµ‹è¯•è§„æ¨¡
cargo bench -- --sample-size 50
```

#### 3. ç½‘ç»œæµ‹è¯•å¤±è´¥
```bash
# æ£€æŸ¥ç½‘ç»œé…ç½®
sudo ss -tuln
sudo iptables -L

# ä½¿ç”¨æœ¬åœ°å›ç¯è¿›è¡Œæµ‹è¯•
cargo bench --features "local-testing"
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨è¿è¡ŒåŸºå‡†æµ‹è¯•æ—¶é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**: `RUST_LOG=debug cargo bench`
2. **æ£€æŸ¥ç³»ç»Ÿèµ„æº**: `htop`, `free -h`, `df -h`
3. **æ›´æ–°ä¾èµ–**: `cargo update`
4. **æ¸…ç†ç¼“å­˜**: `cargo clean && cargo bench`
5. **æŠ¥å‘Šé—®é¢˜**: åœ¨é¡¹ç›®ä»“åº“ä¸­åˆ›å»º issue

---

âœ… åŸºå‡†æµ‹è¯•æ˜¯ç¡®ä¿ MPC API æ€§èƒ½å’Œè´¨é‡çš„é‡è¦å·¥å…·ï¼Œè¯·å®šæœŸè¿è¡Œå¹¶å…³æ³¨æ€§èƒ½å˜åŒ–è¶‹åŠ¿ã€‚